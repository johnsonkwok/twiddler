<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <title>Twiddler</title>
  </head>
  <body>
    <script>

      $(document).ready(function(){
        var $body = $('body');
        $body.html('');

        function addTweets(idx) {
          var tweet = streams.home[idx];
          var $tweet = $('<div></div>');
          $tweet.text('@' + tweet.user + ': ' + tweet.message);
          $tweet.prependTo($body);
        }
        
        var initIndex = 0;
        while (initIndex <= streams.home.length - 1) {
          addTweets(initIndex);
          initIndex += 1;
        }

        let currIndex = streams.home.length;
        function addNewTweets() {
          while (currIndex <= streams.home.length - 1) {
            addTweets(currIndex);
            currIndex += 1;
            $('#refr').prependTo($body);
          }
        }

        $body.prepend("<button>Click to refresh Tweets</button>");
        $('button').addClass('btn').attr("id", "refr");;
        $('#refr').click(addNewTweets);

      });

    </script>
  </body>
</html>
